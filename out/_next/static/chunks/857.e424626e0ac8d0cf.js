(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[857],{5857:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return v}});var n=o(5893),r=o(6158),a=o.n(r),i=o(9651),c=o.n(i),s=o(7294),l=function(e){var t=e.mapStyle,o=e.setMapStyle,r=e.mapStreet,a=e.mapSattelite,i="/media/streets-style-icon.6cda255c.png",c="Streets",l="/media/satellite-style-icon.f45844d1.png",u="Sattelite",p=(0,s.useState)(t==r?l:i),d=p[0],f=p[1],g=(0,s.useState)(t==r?u:c),x=g[0],m=g[1],b={position:"absolute",right:"24px",bottom:"24px",display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"flex-end",width:"60px",height:"60px",boxSizing:"initial",boxShadow:"0 2px 4px rgba(21,45,72,.25)",backgroundSize:"cover",borderRadius:"8px",border:"2px solid #fff",backgroundImage:"linear-gradient(0deg, rgba(0, 0, 0, 0.5) 0%, rgba(0, 0, 0, 0) 28.47%), url(".concat(d,")"),cursor:"pointer",zIndex:10};return(0,n.jsx)("button",{style:b,onClick:function(){t==r?(o(a),f(i),m(c)):(o(r),f(l),m(u))},children:(0,n.jsx)("span",{style:{marginLeft:"3px",fontSize:"12px",lineHeight:"16px",color:"#fff"},children:x})})},u=function(e){var t=e.mapEvent,o=e.setRightButton,r=e.setEventInfo,a=t.lngLat.lng,i=t.lngLat.lat,c=t.point.y,l=t.point.x,u=(0,s.useRef)(null),p={position:"absolute",top:c,left:l,backgroundColor:"white",padding:"20px",fontSize:"12px",cursor:"auto",zIndex:10};return window.addEventListener("click",(function(e){"tooltip-rightButton"!=e.target.getAttribute("id")&&(o(null),e.preventDefault())})),(0,n.jsx)("div",{id:"tooltip-rightButton",ref:u,style:p,children:(0,n.jsxs)("button",{style:{border:"none",backgroundColor:"transparent",cursor:"pointer"},onClick:function(){var e=i+", "+a;navigator.clipboard.writeText(e).then((function(){r((0,n.jsx)("p",{children:"Copied coordinates to clipboard!"})),setTimeout((function(){r(null)}),3e3)}))},children:[i,", ",a]})})},p=o(1475),d=function(e){var t=e.children;return(0,n.jsx)("div",{className:p.component,children:t})},f=o(2449),g=o(3796),x=o(2994),m=o(5505),b=o.n(m);a().accessToken="pk.eyJ1IjoibWF1cm9jcnV6IiwiYSI6ImNrdXI5bHpiaTNseTAydnQ0OWIwaHZlYmkifQ.4oPSaqbvl4ybOhV4ysjUdA";var h={positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0,showUserHeading:!0},y="mapbox://styles/maurocruz/ckur99bp404ze15o0icj8kt6h",v=function(e){var t=(0,s.useContext)(x.X),o=t.dataSource,r=t.dataLocation,i=t.setCenter,p=t.setZoom,m=t.setPitch,v=t.setBearing,S=t.marker,k=(0,s.useRef)(),C=(0,s.useState)(y),w=C[0],j=C[1],_=(0,s.useState)(null),z=_[0],I=_[1],L=(0,s.useState)(null),T=L[0],E=L[1],M=(0,s.useContext)(g.X),P=M.toogleModal,B=M.setModalComponent,N=M.geocoder,H=M.geoLocation;return(0,s.useEffect)((function(){var e=r.viewport,t=r.geojson,s=new(a().Map)({container:k.current,style:w,center:{lng:e.longitude,lat:e.latitude},zoom:e.zoom,pitch:e.pitch,bearing:e.bearing});return N&&s.addControl(new(c())({accessToken:a().accessToken,mapboxgl:a(),types:"place",countries:"br",placeholder:"Procurar por cidade..."})),H&&s.addControl(new(a().GeolocateControl)(h),"top-left"),s.addControl(new(a().NavigationControl)({}),"top-left"),s.addControl(new(a().ScaleControl)({})),S&&t.features.map((function(e){(new(a().Marker)).setLngLat(e.geometry.coordinates).addTo(s),new(a().Popup)({closeButton:!1,anchor:"left",className:b().mapboxPopup}).setText(e.properties.name).setLngLat(e.geometry.coordinates).addTo(s)})),s.on("load",(function(){s.addSource("places",{type:"geojson",data:o}),s.addLayer({id:"cluster-places",type:"symbol",source:"places",layout:{"icon-image":["get","icon-image"],"text-field":["get","name"],"text-size":10,"text-offset":[0,.8],"text-anchor":"top"},paint:{"text-color":"#dd2200"}}),s.on("click","cluster-places",(function(e){var t=e.features[0];s.flyTo({center:t.geometry.coordinates,zoom:18}),function(e){P(!0),B((0,n.jsx)(f.Iq,{feature:e}))}(t)})),s.on("mouseenter","cluster-places",(function(){s.getCanvas().style.cursor="pointer"})),s.on("mouseleave","cluster-places",(function(){s.getCanvas().style.cursor=""})),s.on("move",(function(e){i(s.getCenter()),p(s.getZoom()),m(s.getPitch()),v(s.getBearing())})),s.on("contextmenu",(function(e){I(e)}))})),function(){return s.remove()}}),[w,r]),(0,n.jsxs)("div",{ref:k,style:{width:"100%",height:"100vh"},children:[z&&(0,n.jsx)(u,{mapEvent:z,setRightButton:I,setEventInfo:E}),T&&(0,n.jsx)(d,{children:T}),(0,n.jsx)(l,{mapStyle:w,setMapStyle:j,mapStreet:y,mapSattelite:"mapbox://styles/maurocruz/ckxgf6qdl0p4g14rrqmkr7vh5"})]})}},1475:function(e){e.exports={component:"EventInfo_component__7oxWJ",slideup:"EventInfo_slideup__5iLfV"}},5505:function(e){e.exports={geocoder:"Mapbox_geocoder__azumu",mapboxPopup:"Mapbox_mapboxPopup__rxczJ"}}}]);