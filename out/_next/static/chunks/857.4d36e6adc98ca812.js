(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[857],{5857:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return h}});var n=o(5893),i=o(7294),r=o(6158),a=o.n(r),c=o(9651),l=o.n(c),u=o(3773);var s=o(3281),d=function(t){var e=(0,i.useContext)(s.X).setFlyTo,o=t.mapEvent,r=t.setRightButton,a=t.setEventInfo,c=o.lngLat.lng,l=o.lngLat.lat,d=o.point.y,p=o.point.x,f=(0,i.useRef)(null),g={position:"absolute",top:d,left:p,backgroundColor:"white",padding:"4px",fontSize:"12px",cursor:"auto",zIndex:10},m={border:"1px solid ".concat(u.oB.color.border.lightGray),backgroundColor:"transparent",cursor:"pointer",width:"100%",textAlign:"left",marginBottom:"4px"};return window.addEventListener("click",(function(t){"tooltip-rightButton"!=t.target.getAttribute("id")&&(r(null),t.preventDefault())})),(0,n.jsxs)("div",{id:"tooltip-rightButton",ref:f,style:g,children:[(0,n.jsx)("button",{style:m,onClick:function(){var t=l+", "+c;navigator.clipboard.writeText(t).then((function(){a((0,n.jsx)("p",{children:"Copied coordinates to clipboard!"})),setTimeout((function(){a(null)}),3e3)}))},children:"Copy coordinates to clipboard"}),(0,n.jsx)("button",{style:m,onClick:function(t){e({longitude:c,latitude:l})},children:"Center map here"})]})},p=o(1475),f=function(t){var e=t.children;return(0,n.jsx)("div",{className:p.component,children:e})},g=o(5505),m=o.n(g);a().accessToken="pk.eyJ1IjoibWF1cm9jcnV6IiwiYSI6ImNrdXI5bHpiaTNseTAydnQ0OWIwaHZlYmkifQ.4oPSaqbvl4ybOhV4ysjUdA";var h=function(){var t=(0,i.useContext)(s.X),e=t.longitude,o=t.setLongitude,r=t.latitude,c=t.setLatitude,p=t.zoom,g=t.setZoom,h=t.pitch,x=t.setPitch,v=t.bearing,b=t.setBearing,y=t.markerQuery,C=t.pushState,w=t.mapStyle,E=(t.setMapStyle,t.eventInfo),k=t.setEventInfo,_=(0,i.useContext)(s.X),I=_.geocoder,S=_.geolocate,T=_.flyTo,j=_.viewport,L=(0,i.useRef)(),z=(0,i.useState)(void 0),B=z[0],P=z[1],A=(0,i.useState)(null),N=A[0],M=A[1],H=(0,i.useState)(null),R=H[0],X=H[1];return(0,i.useEffect)((function(){E&&setTimeout((function(){k(null)}),3e3)}),[E]),(0,i.useEffect)((function(){if(T){var t=T.longitude||e,o=T.latitude||r,n=T.zoom||p,i=T.pitch||h,a=T.bearing||v;B.flyTo({center:[t,o],zoom:n,pitch:i,bearing:a})}}),[T]),(0,i.useEffect)((function(){var t=new(a().Map)({container:L.current,style:w,center:{lng:j.longitude,lat:j.latitude},zoom:j.zoom,pitch:j.pitch,bearing:j.bearing});P(t),S&&t.addControl(new(a().GeolocateControl)({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0,showUserHeading:!0}),"top-left"),function(t){t.addControl(new(a().ScaleControl)({}))}(t),function(t){t.addControl(new(a().NavigationControl)({}),"top-left")}(t)}),[j]),(0,i.useEffect)((function(){if(B)if(I){var t=new(l())({accessToken:a().accessToken,mapboxgl:a(),types:"place",countries:u.IS.default.country,placeholder:"Procurar por cidade..."});B.addControl(t),X(t)}else B.hasControl(R)&&B.removeControl(R)}),[I]),(0,i.useEffect)((function(){B&&B.setStyle(w)}),[w]),(0,i.useEffect)((function(){B&&B.on("load",(function(){B.addSource("placesApi",{type:"geojson",data:"https://pirenopolis.tur.br/api/place?format=geojson&limit=none"}),B.addLayer({id:"cluster-places",type:"symbol",source:"placesApi",minzoom:13,layout:{"icon-image":["get","icon-image"],"text-field":["get","name"],"text-size":10,"text-offset":[0,.8],"text-anchor":"top"},paint:{"text-color":"#dd2200"}})}))}),[B]),(0,i.useEffect)((function(){if(B&&y){var t=y.toString();new(a().Popup)({closeButton:!1,anchor:"left",className:m().mapboxPopup}).setText(t).setLngLat([e,r]).addTo(B),(new(a().Marker)).setLngLat([e,r]).addTo(B)}}),[B,y]),(0,i.useEffect)((function(){B&&B.on("contextmenu",(function(t){M(t)})).on("move",(function(t){o(B.getCenter().lng),c(B.getCenter().lat),g(B.getZoom()),x(B.getPitch()),b(B.getBearing())})).on("moveend",(function(){C(B.getCenter().lng,B.getCenter().lat,B.getZoom(),B.getPitch(),B.getBearing())}))}),[B]),(0,n.jsxs)("div",{ref:L,style:{width:"100%",height:"100vh"},children:[N&&(0,n.jsx)(d,{mapEvent:N,setRightButton:M,setEventInfo:k}),E&&(0,n.jsx)(f,{children:E})]})}},1475:function(t){t.exports={component:"EventInfo_component__7oxWJ",slideup:"EventInfo_slideup__5iLfV"}},5505:function(t){t.exports={geocoder:"Mapbox_geocoder__azumu",mapboxPopup:"Mapbox_mapboxPopup__rxczJ"}}}]);